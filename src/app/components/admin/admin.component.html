<div class="admin-container">
  <div class="stats-banner" *ngIf="vistas$ | async as stats">
    <div class="stat-card">
      <i class="fas fa-eye"></i>
      <div class="stat-info">
        <span class="stat-value">{{ stats.vistasTotales }}</span>
        <span class="stat-label">Visitas Totales</span>
      </div>
    </div>
  </div>
  <h1>ğŸ› ï¸ Panel de Control - Huesos de Madera</h1>

  <section class="admin-section">
    <h2>ğŸ“ Retos Pendientes de AprobaciÃ³n</h2>
    <div class="pendientes-grid">
      <div class="admin-card" *ngFor="let p of retosPendientes$ | async">
        <img [src]="p.imagenURL" alt="Propuesta">
        <div class="info">
          <h4>{{ p.reto }}</h4>
          <p>{{ p.descripcion }}</p>
        </div>
        <div class="acciones">
          <button class="btn-aprobar" (click)='aprobarReto(p.id)'>Aprobar</button>
          <button class="btn-borrar" (click)='rechazarReto(p.id)'>Eliminar</button>
        </div>
      </div>
      <p *ngIf="(retosPendientes$ | async)?.length === 0" class="empty-msg">No hay retos por aprobar.</p>
    </div>
  </section>

  <section class="admin-section">
    <h2>ğŸ« Subir Fotos de Talleres/Escuelas</h2>
    <div class="admin-form">
      <input type="text" [(ngModel)]="nuevaFotoTaller.escuela" placeholder="Nombre de la Escuela">
      <input type="text" [(ngModel)]="nuevaFotoTaller.imagenURL" placeholder="Link de la imagen (Direct link)">
      <div class="link-helper">
        <a href="https://postimages.org/" target="_blank" class="btn-external">
          Subir a PostImages <i class="fas fa-external-link-alt"></i>
        </a>
      </div>
      <textarea [(ngModel)]="nuevaFotoTaller.comentario" placeholder="Â¿QuÃ© pasÃ³ en este taller?"></textarea>
      <button class="btn-guardar" (click)="subirFotoTaller()">Subir a GalerÃ­a Oficial</button>
    </div>
  </section>

  <section class="admin-section">
    <h2>ğŸ“‚ Gestionar Contenido Publicado</h2>
    
    <div class="tabs-content">
      <h3>Retos en GalerÃ­a PÃºblica</h3>
      <div class="admin-list">
        <div *ngFor="let item of retosPublicados$ | async" class="admin-item-card">
          <img [src]="item.imagenURL" alt="preview">
          <div class="info">
            <h3>{{ item.reto }}</h3>
            <p>{{ item.escuela }}</p>
          </div>
          <div class="admin-actions">
            <button class="btn-delete" (click)="borrarPublicacion(item.id)">
              <i class="fas fa-trash">X</i>
            </button>
          </div>
        </div>
      </div>

      <h3 style="margin-top: 20px;">Fotos de Talleres</h3>
      <div class="admin-list">
        <div *ngFor="let taller of fotosTalleres$ | async" class="admin-item-card">
          <img [src]="taller.imagenURL" alt="preview">
          <div class="info">
            <h3>{{ taller.escuela }}</h3>
            <p>{{ taller.comentario }}</p>
          </div>
          <div class="admin-actions">
            <button class="btn-delete" (click)="borrarFotoTaller(taller.id)">
              <i class="fas fa-trash">X</i>
            </button>
          </div>
        </div>
      </div>
    </div>
  </section>
</div>